- name: Create k8s namespace
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: v1 
      kind: Namespace
      metadata:
        name: ascn-cluster

- name: Ghost deployment
  shell: kubectl apply -f containers/ghost/ghost_deployment.yml
  register: ghost_deployment

- name: print ghost_deployment
  debug:
    msg: "{{ ghost_deployment.stdout_lines }}"

- name: Ghost service
  shell: kubectl apply -f containers/ghost/ghost_service.yml
  register: ghost_service

- name: print ghost_service
  debug:
    msg: "{{ ghost_service.stdout_lines }}"

#- name: Ghost deployment
#  kubernetes.core.k8s:
#    state: present
#    src: containers/ghost/ghost_deployment.yml
#
#- name: Ghost service 
#  kubernetes.core.k8s:
#    state: present
#    src: containers/ghost/ghost_service.yml